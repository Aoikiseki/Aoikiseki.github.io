<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aoikiseki.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}};
  </script>
<meta name="description" content="设计模式 https:&#x2F;&#x2F;refactoringguru.cn&#x2F;design-patterns&#x2F;builder  设计模式六大原则 https:&#x2F;&#x2F;www.jianshu.com&#x2F;p&#x2F;807bc228dbc2   单一职责 一个类&#x2F;方法只负责一项职责。比如类A负责职责T，那么A被修改的原因就只有职责T的逻辑发生了改变；如果类A同时负责职责T1和T2，那么当因为T1的逻辑发生改变导致修改A时，会对T">
<meta property="og:type" content="article">
<meta property="og:title" content="设计模式">
<meta property="og:url" content="https://aoikiseki.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="AoiKiseki">
<meta property="og:description" content="设计模式 https:&#x2F;&#x2F;refactoringguru.cn&#x2F;design-patterns&#x2F;builder  设计模式六大原则 https:&#x2F;&#x2F;www.jianshu.com&#x2F;p&#x2F;807bc228dbc2   单一职责 一个类&#x2F;方法只负责一项职责。比如类A负责职责T，那么A被修改的原因就只有职责T的逻辑发生了改变；如果类A同时负责职责T1和T2，那么当因为T1的逻辑发生改变导致修改A时，会对T">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://refactoringguru.cn/images/patterns/diagrams/builder/structure-indexed.png">
<meta property="og:image" content="https://refactoringguru.cn/images/patterns/diagrams/facade/structure-indexed.png">
<meta property="article:published_time" content="2021-03-17T14:52:01.000Z">
<meta property="article:modified_time" content="2021-03-17T14:52:41.172Z">
<meta property="article:author" content="AoiKiseki">
<meta property="article:tag" content="设计模式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://refactoringguru.cn/images/patterns/diagrams/builder/structure-indexed.png">


<link rel="canonical" href="https://aoikiseki.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<title>设计模式 | AoiKiseki</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">AoiKiseki</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">一枚有些笨拙的iOS开发者</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.</span> <span class="nav-text">设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99"><span class="nav-number">1.1.</span> <span class="nav-text">设计模式六大原则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%9E%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.2.</span> <span class="nav-text">创建型设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.2.1.</span> <span class="nav-text">简单工厂模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.2.2.</span> <span class="nav-text">工厂方法模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.2.3.</span> <span class="nav-text">抽象工厂模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">工厂模式总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.2.4.</span> <span class="nav-text">生成器模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">使用方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9B%B4%E5%8A%A0%E5%B8%B8%E8%A7%81%E7%9A%84%E7%94%9F%E6%88%90%E5%99%A8%E6%A8%A1%E5%BC%8F%E4%BB%A5%E5%8F%8A%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8"><span class="nav-number">1.2.4.2.</span> <span class="nav-text">更加常见的生成器模式以及链式调用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93"><span class="nav-number">1.2.4.3.</span> <span class="nav-text">生成器模式总结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E5%9E%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.3.</span> <span class="nav-text">结构型设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%EF%BC%88Adapter%E3%80%81Wrapper%EF%BC%89"><span class="nav-number">1.3.1.</span> <span class="nav-text">适配器模式（Adapter、Wrapper）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E9%80%82%E9%85%8D%E5%99%A8"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">对象适配器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B1%BB%E9%80%82%E9%85%8D%E5%99%A8"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">类适配器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E9%80%82%E9%85%8D%E5%99%A8-VS-%E7%B1%BB%E9%80%82%E9%85%8D%E5%99%A8"><span class="nav-number">1.3.1.3.</span> <span class="nav-text">对象适配器 VS 类适配器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%96%E8%A7%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8FFacade"><span class="nav-number">1.4.</span> <span class="nav-text">外观设计模式Facade</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93"><span class="nav-number">1.4.0.1.</span> <span class="nav-text">外观模式总结</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">AoiKiseki</p>
  <div class="site-description" itemprop="description">记录iOS开发之旅</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aoikiseki.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="AoiKiseki">
      <meta itemprop="description" content="记录iOS开发之旅">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AoiKiseki">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          设计模式
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-03-17 22:52:01 / 修改时间：22:52:41" itemprop="dateCreated datePublished" datetime="2021-03-17T22:52:01+08:00">2021-03-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">计算机基础</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://refactoringguru.cn/design-patterns/builder">https://refactoringguru.cn/design-patterns/builder</a></p>
</blockquote>
<h2 id="设计模式六大原则"><a href="#设计模式六大原则" class="headerlink" title="设计模式六大原则"></a>设计模式六大原则</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/807bc228dbc2">https://www.jianshu.com/p/807bc228dbc2</a></p>
</blockquote>
<ul>
<li><p>单一职责</p>
<p>一个类/方法只负责一项职责。<br>比如类A负责职责T，那么A被修改的原因就只有职责T的逻辑发生了改变；如果类A同时负责职责T1和T2，那么当因为T1的逻辑发生改变导致修改A时，会对T2部分也产生修改。</p>
</li>
<li><p>里氏替换</p>
<p>在使用基类的的地方可以任意使用其子类，能保证子类完美替换基类。</p>
</li>
<li><p>依赖倒置原则</p>
<p>高层模块不应该依赖底层模块，二者都该依赖其抽象；抽象不应该依赖细节；细节应该依赖抽象</p>
<p>高层模块（调用端）调用接口，底层模块（实现端）实现接口，二者直接交互的应该都是接口</p>
</li>
<li><p>接口隔离原则</p>
<p>使用多个相互隔离的小接口，比使用一个大接口要好。</p>
<p>个人理解有点类似单一职责，对于一个接口应该只负责一个职责，要修改不同的内容，就要提供多个接口</p>
</li>
<li><p>迪米特法则</p>
<p>类间解耦。</p>
<p>一个类对自己耦合关联的类知道的越少越好，尽量不要和其他类进行直接接触，而是通过中间类进行接触，达到低耦合。</p>
</li>
<li><p>开闭原则</p>
<p>拥抱扩展，拒绝修改</p>
</li>
</ul>
<h2 id="创建型设计模式"><a href="#创建型设计模式" class="headerlink" title="创建型设计模式"></a>创建型设计模式</h2><h3 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h3><p>1.有一个专门的类Factory负责创建其他类并返回<br>2.Factory对象可以通过接收不同的参数创建不同的对象<br>优点：简单<br>缺点：如果需要添加新的类，则if-else条件就会增加，就要修改已有工厂类的逻辑，<strong>违反开闭原则</strong></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> price: <span class="type">Float</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Milk</span>: <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> price: <span class="type">Float</span> <span class="operator">=</span> <span class="number">1.5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Noodles</span>: <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> price: <span class="type">Float</span> <span class="operator">=</span> <span class="number">2.5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rice</span>: <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> price: <span class="type">Float</span> <span class="operator">=</span> <span class="number">0.5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">createProduct</span>(<span class="params">coins</span>: <span class="type">Int</span>)</span> -&gt; <span class="type">Product</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> coins <span class="operator">&gt;</span> <span class="number">2</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Noodles</span>()</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> type <span class="operator">&gt;</span> <span class="number">1</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Milk</span>()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Rice</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h3><p>1.将工厂类再进行抽象，每个工厂实例负责特定的产品生产<br>2.如果需要扩展，则增加工厂而不改变工厂类<br>优点：符合开闭原则；将具体产品和生产过程进行抽象，使得用户无需知道具体是何种产品被生产，增加了工厂的替换灵活性<br>缺点：每个产品都需要新增类，代码可能变得臃肿</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">createProduct</span>()</span> -&gt; <span class="type">Product</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MilkFactory</span>: <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">createProduct</span>()</span> -&gt; <span class="type">Product</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Milk</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NoodlesFactory</span>: <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">createProduct</span>()</span> -&gt; <span class="type">Product</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Noodles</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RiceFactory</span>: <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">createProduct</span>()</span> -&gt; <span class="type">Product</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Rice</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h3><p>工厂方法模式中最大的限制在于每个具体工厂只生产一种产品，实际上很多时候一个工厂可以生产多个产品，比如小米的工厂可以生产小米的低端、中端、高端机，华为的工厂可以生产华为的低端、中端、高端机，甚至可以生产除手机之外的其他产品。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">createPhone</span>()</span> -&gt; <span class="type">Phone</span></span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">createTV</span>()</span> -&gt; <span class="type">TV</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Phone</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TV</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MiFactory</span>: <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">createPhone</span>()</span> -&gt; <span class="type">Phone</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Mi10</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">createTV</span>()</span> -&gt; <span class="type">TV</span> &#123;</span><br><span class="line">      	<span class="keyword">return</span> <span class="type">MiTV</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HuaweiFactory</span>: <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">createPhone</span>()</span> -&gt; <span class="type">Phone</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Mate40</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">createTV</span>()</span> -&gt; <span class="type">TV</span> &#123;</span><br><span class="line">      	<span class="keyword">return</span> <span class="type">HuaweiTV</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>优点：相比于工厂方法模式，支持产品族而非单一产品，在需要多个产品配合使用的场景中，可以通过切换工厂达到目的<br>缺点：开闭原则有倾斜，新增产品族和工厂很简单，新增产品则很困难，需要修改接口<br>应用场景：控件主题，控件的各种样式属性可以作为配置项，每一个主题都包含多种需要配置的属性。这里配置项Configuration就是Factory，需要配置的属性就是产品族</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">TextStyleConfiguration</span> </span>&#123;</span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">getFont</span>()</span> -&gt; <span class="type">UIFont</span></span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">getForegroundColor</span> </span>-&gt; <span class="type">UIColor</span></span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">getBackgroundColor</span> </span>-&gt; <span class="type">UIColor</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TitleStyleConfiguration</span>: <span class="title">TextStyleConfiguration</span> </span>&#123;</span><br><span class="line">  	<span class="operator">...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ContentStyleConfiguration</span>: <span class="title">TextStyleConfiguration</span> </span>&#123;</span><br><span class="line">  	<span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="工厂模式总结"><a href="#工厂模式总结" class="headerlink" title="工厂模式总结"></a>工厂模式总结</h4><p>可以对VC使用工厂方法模式/简单工厂模式，将通用的逻辑放到父VC，根据条件返回对应的子VC。而对于各种成套的配置项则可以考虑使用抽象工厂模式。</p>
<h3 id="生成器模式"><a href="#生成器模式" class="headerlink" title="生成器模式"></a>生成器模式</h3><p>在建造房屋时，不同房屋的结构是不一样的，比如窗户的数量，卫浴的数量，阁楼的有无等等，应对这种需求有两种方法：</p>
<ul>
<li>超级构造函数</li>
<li>不断从House基类中派生子类</li>
</ul>
<p>生成器模式提供了第三种思路，将对象的构建步骤抽取出来，使得构造过程中的每一步都独立出来。将对象的构造过程交给Builder，而每一步骤如何创建对应部件可以自定义。</p>
<p>一个标准的生成器模式包括如下几个部分：</p>
<ul>
<li>protocol Builder：用于定义生产产品的通用步骤，将步骤抽取出来，如何使用由Director决定</li>
<li>class ConcreteBuilder：提供不同产品对于通用步骤的不同实现，也可以不遵循通用步骤</li>
<li>class Product：特定步骤下产生的具体产品</li>
<li>class Director：定义调用构造步骤的顺序</li>
<li>class Client：客户端将Director和Builder进行关联并得到产品</li>
</ul>
<p><img src="https://refactoringguru.cn/images/patterns/diagrams/builder/structure-indexed.png" alt="生成器设计模式结构"></p>
<h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><ul>
<li><p>通过Builder协议将构造过程抽取为单个方法</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Protocol</span> <span class="type">Builder</span> &#123;</span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">reset</span>()</span></span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">buildStep1</span>()</span></span><br><span class="line">   	<span class="function"><span class="keyword">func</span> <span class="title">buildStep2</span>()</span></span><br><span class="line">	  <span class="function"><span class="keyword">func</span> <span class="title">buildStep3</span>()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>具体生成器实现Builder协议中的构造方法，并提供获取最终产品的方法</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteBuilder</span>: <span class="title">Builder</span> </span>&#123;</span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">reset</span>()</span> &#123;&#125;</span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">buildStep1</span>()</span> &#123;&#125;</span><br><span class="line">   	<span class="function"><span class="keyword">func</span> <span class="title">buildStep2</span>()</span> &#123;&#125;</span><br><span class="line">	  <span class="function"><span class="keyword">func</span> <span class="title">buildStep3</span>()</span> &#123;&#125;</span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">getResult</span>()</span> -&gt; <span class="type">Product</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>如果把Builder比做真正构造产品的工人，那么Director就是Client请来的监工，负责根据当前环境指导和监督Builder生产产品。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Director</span> </span>&#123;</span><br><span class="line">  	<span class="keyword">var</span> builder: <span class="type">Builder</span></span><br><span class="line">  	<span class="function"><span class="keyword">init</span>(<span class="params">builder</span>: <span class="type">Builder</span>)</span> &#123; <span class="keyword">self</span>.builder <span class="operator">=</span> builder &#125;</span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">changeBuilder</span>(<span class="params">builder</span>: <span class="type">Builder</span>)</span></span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">makeProduct</span>()</span> &#123;</span><br><span class="line">        <span class="comment">// 指导和监督builder根据环境生产产品</span></span><br><span class="line">      	builder.reset()</span><br><span class="line">      	<span class="keyword">if</span> environment <span class="operator">==</span> .type1 &#123;</span><br><span class="line">          	builder.buildStep1()</span><br><span class="line">            builder.buildStep2()</span><br><span class="line">            builder.buildStep3()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          	builder.buildStep1()</span><br><span class="line">            builder.buildStep3()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Client</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> builder <span class="operator">=</span> <span class="type">ConcreteBuilder</span>()</span><br><span class="line"><span class="keyword">let</span> director <span class="operator">=</span> <span class="type">Director</span>(builder)</span><br><span class="line">director.makeProduct()</span><br><span class="line"><span class="keyword">let</span> product <span class="operator">=</span> builder.getResult()</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="更加常见的生成器模式以及链式调用"><a href="#更加常见的生成器模式以及链式调用" class="headerlink" title="更加常见的生成器模式以及链式调用"></a>更加常见的生成器模式以及链式调用</h4><p>标准的生成器模式是一个比较复杂的实现方式，在工程中较为常用的就是用builder替代类中每个属性的setter，将setter抽取为buildStep，同时每个buildStep可以返回当前builder，即可达到链式调用的效果，下面是Swift实现的小例子：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">House</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> wall: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> window: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> table: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> chair: <span class="type">Int</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">init</span>(<span class="params">builder</span>: <span class="type">Builder</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.wall <span class="operator">=</span> builder.wall</span><br><span class="line">        <span class="keyword">self</span>.window <span class="operator">=</span> builder.window</span><br><span class="line">        <span class="keyword">self</span>.table <span class="operator">=</span> builder.table</span><br><span class="line">        <span class="keyword">self</span>.chair <span class="operator">=</span> builder.chair</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> wall: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">var</span> window: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">var</span> table: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">var</span> chair: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">setWall</span>(<span class="params">wall</span>: <span class="type">Int</span>)</span> -&gt; <span class="type">Builder</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.wall <span class="operator">=</span> wall</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">setWindow</span>(<span class="params">window</span>: <span class="type">Int</span>)</span> -&gt; <span class="type">Builder</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.window <span class="operator">=</span> window</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">setTable</span>(<span class="params">table</span>: <span class="type">Int</span>)</span> -&gt; <span class="type">Builder</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.table <span class="operator">=</span> table</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">setChair</span>(<span class="params">chair</span>: <span class="type">Int</span>)</span> -&gt; <span class="type">Builder</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.chair <span class="operator">=</span> chair</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">getHouse</span>()</span> -&gt; <span class="type">House</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">House</span>(builder: <span class="keyword">self</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用处</span></span><br><span class="line"><span class="keyword">let</span> hosue <span class="operator">=</span> <span class="type">House</span>.<span class="type">Builder</span>().setWall(wall: <span class="number">1</span>).setTable(table: <span class="number">2</span>).setChair(chair: <span class="number">3</span>).setWindow(window: <span class="number">4</span>).getHouse()</span><br></pre></td></tr></table></figure>

<h4 id="生成器模式总结"><a href="#生成器模式总结" class="headerlink" title="生成器模式总结"></a>生成器模式总结</h4><p>优点</p>
<ul>
<li>将构造代码从业务逻辑中抽取出来</li>
<li>生产不同产品时可以复用来自Director的相同的构造代码，只需要提供不同的Builder实现即可</li>
<li>适用于构造步骤相对固定的场景</li>
</ul>
<p>缺点</p>
<ul>
<li>代码很可能更加臃肿</li>
</ul>
<p>使用场景</p>
<ul>
<li><p>创建对象的算法（Builder）独立于其组成部分和装配方式（Director），使得利用Director我们可以用同样的步骤传入不同的Builder来创建不同的对象。</p>
<blockquote>
<p>实例来源<a target="_blank" rel="noopener" href="https://www.iteye.com/topic/1125714">https://www.iteye.com/topic/1125714</a></p>
<p>为了导出数据，需要进行特定的步骤：1.拼接文件头 2.拼接文件体 3.拼接文件尾 4.输出文件，而不同的输出格式txt、xml等对这几步的处理方式不同，但步骤是一样的，此时就可以用生成器模式。根据输出不同文件的算法创建不同的Builder，Director负责调用Builder完成整个导出工作。</p>
</blockquote>
</li>
<li><p>如果类中包含大量属性（比如几十个），每个属性的设置和不设置形成了大量的排列组合结果，而如果将这些属性的设置都放到init中，init的函数体会变得相当大，而且init中可能会包含其他业务逻辑，此时通过将这些属性抽取为buildStep，就将属性的设置和业务逻辑分离开，并且可读性更强。（貌似对于Swift来说，这部分的优势少了很多）</p>
</li>
</ul>
<h2 id="结构型设计模式"><a href="#结构型设计模式" class="headerlink" title="结构型设计模式"></a>结构型设计模式</h2><blockquote>
<p>结构型模式描述如何将类或者对象结合在一起形成更大的结构</p>
</blockquote>
<h3 id="适配器模式（Adapter、Wrapper）"><a href="#适配器模式（Adapter、Wrapper）" class="headerlink" title="适配器模式（Adapter、Wrapper）"></a>适配器模式（Adapter、Wrapper）</h3><h4 id="对象适配器"><a href="#对象适配器" class="headerlink" title="对象适配器"></a>对象适配器</h4><p>服务器可以处理Json格式的数据，但是从客户端收集的数据只有XML，这时就需要对数据格式进行转换，适配器就是完成这样一种工作。在本例中假定服务器的代码我们难以修改，那么新建的适配器就是为了适配服务器代码，服务端被称为adaptee，是难以修改的部分。适配器要完成数据转换的同时，要让用户有一种和服务端直接交互的感觉。</p>
<p>对象适配器的实现可以分为如下几步骤：</p>
<ul>
<li>声明面向客户的接口Adapter，约定服务端和客户端理想的交互方式</li>
<li>实现具体的ConcreteAdapter，持有adaptee</li>
<li>实现ConcreteAdapter中的交互方法</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">analysisData</span>(<span class="params">data</span>: <span class="type">JSON</span>)</span> -&gt; <span class="type">Data</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Adapter</span> </span>&#123;</span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">getResult</span>(<span class="params">data</span>: <span class="type">XML</span>)</span> -&gt; <span class="type">Data</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteAdapter</span>: <span class="title">Adapter</span> </span>&#123;</span><br><span class="line">  	<span class="keyword">var</span> adaptee: <span class="type">Service</span></span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">getResult</span>(<span class="params">data</span>: <span class="type">XML</span>)</span> -&gt; <span class="type">Data</span> &#123;</span><br><span class="line">      	<span class="keyword">let</span> jsonData <span class="operator">=</span> convertFormat(data)</span><br><span class="line">      	<span class="keyword">return</span> adaptee.analysisData(jsonData)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="类适配器"><a href="#类适配器" class="headerlink" title="类适配器"></a>类适配器</h4><p>借助多重继承机制，将ConcreteAdapter实现为Adaptee的子类，从而无需持有adaptee就可以使用Service的方法</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">analysisData</span>(<span class="params">data</span>: <span class="type">JSON</span>)</span> -&gt; <span class="type">Data</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Adapter</span> </span>&#123;</span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">getResult</span>(<span class="params">data</span>: <span class="type">XML</span>)</span> -&gt; <span class="type">Data</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteAdapter</span>: <span class="title">Adapter</span>, <span class="title">Service</span> </span>&#123;</span><br><span class="line">  	<span class="function"><span class="keyword">func</span> <span class="title">getResult</span>(<span class="params">data</span>: <span class="type">XML</span>)</span> -&gt; <span class="type">Data</span> &#123;</span><br><span class="line">      	<span class="keyword">let</span> jsonData <span class="operator">=</span> convertFormat(data)</span><br><span class="line">      	<span class="keyword">return</span> analysisData(jsonData)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="对象适配器-VS-类适配器"><a href="#对象适配器-VS-类适配器" class="headerlink" title="对象适配器 VS 类适配器"></a>对象适配器 VS 类适配器</h4><p>对象适配器：可以持有多个Adaptee，从而调用不同的服务接口，但是不能修改Adaptee的实现<br>类适配器：无需持有Adaptee，可以修改继承来的实现</p>
<h2 id="外观设计模式Facade"><a href="#外观设计模式Facade" class="headerlink" title="外观设计模式Facade"></a>外观设计模式Facade</h2><p>当你的客户类需要与许多提供功能的类进行交互，却只用到每个类中很少的几个方法，甚至功能类之间还有横向的交互，如果将所有功能类直接交给客户类去使用，客户类中要控制的逻辑会非常的复杂。</p>
<p>此时可以通过加一个“中间层”对逻辑进行整理：</p>
<ul>
<li>将功能类横向交互交给中间层去管理</li>
<li>只给客户类暴露其真正需要的方法</li>
</ul>
<p>这个“中间层”就是外观类Facade，外观模式差不多也是项目中最常用的模式了，对于复杂的逻辑简单地加一个中间层就可以让代码对客户类变得简单清晰。</p>
<p><img src="https://refactoringguru.cn/images/patterns/diagrams/facade/structure-indexed.png" alt="外观设计模式的结构"></p>
<h4 id="外观模式总结"><a href="#外观模式总结" class="headerlink" title="外观模式总结"></a>外观模式总结</h4><p>优点</p>
<ul>
<li>代码独立于复杂的子系统</li>
<li>简单</li>
</ul>
<p>缺点</p>
<ul>
<li>外观类可能会与所有类都耦合</li>
</ul>
<p>应用场景</p>
<ul>
<li>需要指向一套复杂子系统的简单接口，可以使用外观模式创建中间类</li>
<li>需要将子系统组织为多层结构，可以利用外观模式定义每一层的入口</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag"># 设计模式</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/HTTP/" rel="prev" title="HTTP">
                  <i class="fa fa-chevron-left"></i> HTTP
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">AoiKiseki</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
